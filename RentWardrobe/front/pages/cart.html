<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <title>RentWardrobe - Кошик</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet" />
    <!-- Font Awesome 6 (іконки) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <!-- Підключення файлу зі стилями -->
    <link rel="stylesheet" href="../styles/cart.css" />
</head>
<body>

<!-- Верхній рядок -->
<div class="top-message">
    <span>YOUR PERFECT PROM LOOKS STARTS HERE</span>
    <span>YOUR PERFECT PROM LOOKS STARTS HERE</span>
    <span>YOUR PERFECT PROM LOOKS STARTS HERE</span>
</div>

<!-- Шапка -->
<header>
    <a href="index.html" style="color: inherit; text-decoration: none;">
        <div class="logo">RentWardrobe</div>
    </a>
    <nav class="menu">
        <ul>
            <li><a href="#">Жіночий</a></li>
            <li><a href="#">Чоловічий</a></li>
            <li><a href="#">Пошук</a></li>
            <li><a href="#">Особистий кабінет</a></li>
        </ul>
    </nav>
    <div class="header-icons">
        <a href="cart.html"><i class="fa-solid fa-cart-shopping"></i></a>
        <a href="userProfile.html"><i class="fa-solid fa-user"></i></a>
    </div>
</header>

<!-- Основний контейнер -->
<div class="cart-container">
    <!-- Хлібні крихти -->
    <div class="breadcrumbs">
        <a href="#">RentWardrobe</a> / <span>Кошик</span>
    </div>

    <!-- Заголовок -->
    <h2 class="cart-title">МІЙ КОШИК</h2>

    <!-- Контейнер для динамічного додавання товарів -->
    <div id="cartItemsContainer"></div>

    <!-- Нижній блок: Кнопка оформлення замовлення та загальна сума -->
    <div class="cart-bottom">
        <button class="checkout-btn" onclick="window.location.href='checkout.html'">Оформити замовлення</button>
        <div class="cart-total">
            <span>Всього</span>
            <strong id="totalPrice">0 грн</strong>
        </div>
    </div>
</div>

<script>
    function renderCartItems() {
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cartItemsContainer.innerHTML = ''; // очищення контейнера перед відображенням
        let totalPrice = 0;

        cart.forEach(item => {
            // Припустимо, що "price" має формат "14990 грн", тому вилучаємо число:
            const priceNumber = parseFloat(item.price.replace(/\D/g, ''));
            totalPrice += priceNumber * item.quantity;

            // Створюємо HTML-блок для кожного товару
            const itemDiv = document.createElement('div');
            itemDiv.className = 'cart-item';
            itemDiv.innerHTML = `
        <div class="item-image">
          <img src="${item.img}" alt="${item.title}" />
        </div>
        <div class="item-right">
          <div class="item-upper">
            <div class="item-quantity">
              <span>Кількість:</span>
              <input type="number" value="${item.quantity}" min="1" data-code="${item.code}" class="quantity-input" />
            </div>
            <div class="item-total-price">
              <span>Ціна:</span>
              <strong>${priceNumber * item.quantity} грн</strong>
            </div>
          </div>
          <div class="item-details">
            <p class="item-name">${item.title}</p>
            <!-- За потребою можна додати розмір, колір і т.д. -->
          </div>
        </div>
      `;
            cartItemsContainer.appendChild(itemDiv);
        });

        document.getElementById('totalPrice').textContent = totalPrice + ' грн';
    }

    // Викликаємо функцію відразу після завантаження сторінки
    renderCartItems();
</script>

</body>
</html>
