<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <title>RentWardrobe - Деталі товару</title>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
            href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap"
            rel="stylesheet"
    />

    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />

    <link rel="stylesheet" href="../styles/product.css" />
</head>
<body>


<div class="top-message">
    <span>YOUR PERFECT PROM LOOK STARTS HERE</span>
</div>


<header>
    <a href="index.html" style="color: inherit; text-decoration: none;">
        <div class="logo">RentWardrobe</div>
    </a>
    <nav class="top-nav">
        <ul>
            <li><a href="#">Жіночий</a></li>
            <li><a href="#">Чоловічий</a></li>
            <li><a href="#" id="profileLink">Особистий кабінет</a></li>
        </ul>
    </nav>
    <div class="header-icons">
        <a href="cart.html">
            <i class="fa-solid fa-cart-shopping"></i>
        </a>
        <a href="#" id="profileLinkIcon">
            <i class="fa-solid fa-user"></i>
        </a>
    </div>
</header>

<div class="product-container">
    <div class="breadcrumbs">
        <a href="#">RentWardrobe</a> /
        <a href="#">Жінки</a> /
        <a href="#">Сукні</a> /
        <span id="breadcrumbTitle">Назва товару</span>
    </div>


    <div class="product-main">

        <div class="main-image">

            <img
                    src="../pictures/placeholder.jpg"
                    alt="Main"
                    id="mainPhoto"
            />
        </div>

        <!-- Опис товару справа -->
        <div class="product-info">
            <h1 id="productTitle">Назва товару</h1>
            <p class="article" id="productCode">Код: NO-000000</p>

            <div class="price-block">
                <span class="price" id="productPrice">1 4990 грн</span>
                <span class="in-stock">В наявності</span>
            </div>

            <!-- Зірочки -->
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>
            <span class="fa fa-star checked"></span>

            <div class="size-block">
                <h4>Виберіть розмір:</h4>
                <div class="sizes">
                    <button class="size-btn">XS</button>
                    <button class="size-btn">S</button>
                    <button class="size-btn">M</button>
                    <button class="size-btn">L</button>
                </div>
                <p class="price-per-day">
                    Вартість оренди: <strong id="rentPrice">1000 грн/добу</strong>
                </p>
            </div>

            <div class="buttons-block">
                <button class="add-to-cart">В кошик</button>
                <button class="buy-1-click">Замовити в 1 клік</button>
            </div>

            <!-- Вкладки (Опис, Характеристики, Заміри виробу, Доставка і оплата, Відгук) -->
            <div class="tabs">
                <button class="tab-link active" data-tab="tab-description">Опис</button>
                <button class="tab-link" data-tab="tab-characteristics">Характеристики</button>
                <button class="tab-link" data-tab="tab-measures">Заміри виробу</button>
                <button class="tab-link" data-tab="tab-delivery">Доставка і оплата</button>
                <button class="tab-link" data-tab="tab-review">Відгук</button>
            </div>

            <!-- Контейнер із вмістом вкладок -->
            <div class="tab-content active" id="tab-description">
                <p id="descriptionText">
                    Тут з’явиться опис товару з JavaScript...
                </p>
            </div>
            <div class="tab-content" id="tab-characteristics">
                <ul>
                    <li>Матеріал: Шовк</li>
                    <li>Колір: Бордовий</li>
                    <li>Довжина: Максі</li>
                    <li>Рукав: Відкриті плечі</li>
                </ul>
            </div>
            <div class="tab-content" id="tab-measures">
                <p>Довжина виробу: 150 см</p>
            </div>
            <div class="tab-content" id="tab-delivery">
                <p>Доставка Новою Поштою по всій Україні.</p>
            </div>
            <div class="tab-content" id="tab-review">
                <p>Відгуки покупців відображатимуться тут.</p>
            </div>
        </div>
    </div>
</div>

<script>
    const tabLinks = document.querySelectorAll('.tab-link');
    const tabContents = document.querySelectorAll('.tab-content');

    tabLinks.forEach((btn) => {
        btn.addEventListener('click', () => {
            tabLinks.forEach((item) => item.classList.remove('active'));
            btn.classList.add('active');
            tabContents.forEach((content) => content.classList.remove('active'));
            const tabId = btn.getAttribute('data-tab');
            const currentTab = document.getElementById(tabId);
            currentTab.classList.add('active');
        });
    });
</script>


<script>

    const productJSON = sessionStorage.getItem('selectedProduct');

    if (productJSON) {

        const product = JSON.parse(productJSON);


        document.getElementById('breadcrumbTitle').textContent = product.title;
        document.getElementById('productTitle').textContent = product.title;
        document.getElementById('mainPhoto').src = product.img;
        document.getElementById('productPrice').textContent = product.price;
        document.getElementById('productCode').textContent = 'Код: ' + (product.code || 'NO-000000');
        document.getElementById('rentPrice').textContent = product.rentPrice || '1000 грн/добу';
        document.getElementById('descriptionText').textContent = product.description;
        const sizesBlock = document.querySelector('.sizes');
        sizesBlock.innerHTML = '';

        if (product.sizes && Array.isArray(product.sizes)) {
            product.sizes.forEach(size => {
                const button = document.createElement('button');
                button.className = 'size-btn';
                button.textContent = size;
                sizesBlock.appendChild(button);
            });
        }
    }
</script>
<script>
    // Додаємо обробник для кнопки "В кошик"
    document.querySelector('.add-to-cart').addEventListener('click', function() {
        // Зчитуємо дані товару із sessionStorage (вони були збережені при переході)
        const productJSON = sessionStorage.getItem('selectedProduct');
        if (productJSON) {
            const product = JSON.parse(productJSON);
            // Додаємо поле quantity (кількість) – за замовчуванням 1
            product.quantity = 1;

            // Отримуємо існуючий кошик із localStorage або створюємо новий порожній масив
            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            // (Опціонально) Перевірка, чи існує товар уже в кошику і збільшення кількості
            const existingProductIndex = cart.findIndex(item => item.code === product.code);
            if (existingProductIndex !== -1) {
                // Якщо товар вже є, збільшуємо кількість
                cart[existingProductIndex].quantity += 1;
            } else {
                // Інакше додаємо новий товар до кошика
                cart.push(product);
            }

            // Зберігаємо оновлений кошик у localStorage
            localStorage.setItem('cart', JSON.stringify(cart));

            alert('Товар додано до кошика!');
        } else {
            alert('Дані про товар не знайдено!');
        }
    });

    function handleProfileClick(event) {
        event.preventDefault();
        window.location.href = 'userProfile.html';
    }

    document.getElementById('profileLink').addEventListener('click', handleProfileClick);
    document.getElementById('profileLinkIcon')?.addEventListener('click', handleProfileClick);
</script>
</body>
</html>
